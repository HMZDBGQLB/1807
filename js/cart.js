"use strict";require(["config"],function(){require(["jquery","header","template","footer"],function(e,t,c){new Promise(function(t,o){e("header").load("/html/component/header.html",function(){t()}),e("footer").load("/html/component/footer.html",function(){e(".goTop").gotoTop()})}).then(function(){t.isLogin()}).then(function(){e.ajax({type:"post",dataType:"json",url:"http://localhost/project/app/php/api/cart.php",success:function(t){console.log(t);var o=c("goods",{goods:t});e("#tbody").html(o)},complete:function(){var a=0;function t(){a=0,e.each(e(".scount"),function(){a+=parseInt(e(this).html())}),e("#money").html("￥"+a)}t();var o=!0,c=e(".checkBox").length;e(".checkAll").click(function(){o?(e(this).removeClass("act"),e(".checkBox").removeClass("act"),o=!1,a=c=0,e("#money").html("￥"+a)):(e(this).addClass("act"),e(".checkBox").addClass("act"),c=e(".checkBox").length,o=!0,t())}),e(".checkBox").click(function(){console.log(123),e(this).hasClass("act")?(e(this).removeClass("act"),c--,a-=e(this).parents("tr").find(".scount").html()):(e(this).addClass("act"),c++,a+=Number(e(this).parents("tr").find(".scount").html())),c===e(".checkBox").length?(e(".checkAll").addClass("act"),t(),o=!0):(e(".checkAll").removeClass("act"),o=!1,e("#money").html("￥"+a))}),e(".addone").click(function(){var t=parseInt(e(this).prev().find(".count").html());t++,e(this).prev().find(".count").html(t);var o=e(this).parents("tr").find("._price").html(),c=o*t;e(this).parents("tr").find(".scount").html(c),a+=Number(o),e(this).parents("tr").find(".checkBox").hasClass("act")&&e("#money").html("￥"+a);var n=e(this).attr("data-id");e.ajax({type:"post",data:{id:n,num:t},dataType:"json",url:"http://localhost/project/app/php/api/cart.php",success:function(t){console.log(t)}})}),e(".subone").click(function(){var t=e(this).next().find(".count").html();if(--t<1)t=1;else{e(this).next().find(".count").html(t);var o=e(this).parents("tr").find("._price").html(),c=o*t;e(this).parents("tr").find(".scount").html(c),a-=Number(o),e(this).parents("tr").find(".checkBox").hasClass("act")&&e("#money").html("￥"+a);var n=e(this).attr("data-id");e.ajax({type:"post",data:{id:n,num:t},dataType:"json",url:"http://localhost/project/app/php/api/cart.php",success:function(t){console.log(t)}})}}),e(".del").click(function(){var t=e(this);e(this).parents("tr").find(".checkBox").hasClass("act")&&(a-=e(this).parents("tr").find(".scount").html(),e("#money").html("￥"+a)),e(this).parents("tr").hide();var o=e(this).attr("data-id");e.ajax({method:"post",data:{id:o,page:"cart"},dataType:"json",url:"http://localhost/project/app/php/api/cart.php",success:function(t){console.log(t)},complete:function(){t.parents("tr").remove()}})})}})}).then(function(){e("#go_pay").click(function(){e("#pay_code").show()}),e("#close").click(function(){e("#pay_code").hide()})})})});