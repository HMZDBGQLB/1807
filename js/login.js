"use strict";require(["config"],function(){require(["jquery","template","jquerycookie"],function(c,t){new Promise(function(o,e){c.ajax({method:"get",url:"/html/component/login_register.html",success:function(o){c(document.body).prepend(o)},complete:function(){c("form").append(c("#login").children()),o()}})}).then(function(){c.cookie("tel")&&(c("#txt").val(c.cookie("tel")),c.ajax({method:"post",data:{tel:c.cookie("tel")},dataType:"json",url:"http://localhost/project/app/php/api/login_auto.php",success:function(o){c("#psd").val(o[0].password)},complete:function(){c.cookie("tel",c.cookie("tel"),{expires:-1,path:"/"})}}))}).then(function(){c("form").submit(function(o){var e=c("#txt").val(),t=c("#psd").val(),n=!0;return""===e&&(n=!1,c("form .err1").html("登录名不能为空！")),""===t&&(n=!1,c("form .err2").html("密码不能为空！")),n?c.ajax({method:"post",data:{user:e,password:t},dataType:"json",url:"http://localhost/project/app/php/api/login.php",success:function(o){1===o.code?(alert("登录成功！"),c.cookie("user",e,{expires:7,path:"/"}),location.href="/"):alert("用户名或密码不正确！")}}):c("form input").focus(function(){c(this).next().html("")}),o.preventDefault(),!1})}).then(function(){c("#acc_num").click(function(){c(this).addClass("red").siblings().removeClass("red"),c("#code_login").hide(),c("form input,form p,form #forget").show()}),c("#QR_code").click(function(){c(this).addClass("red").siblings().removeClass("red"),c("#code_login").show(),c("form input,form p,form #forget").hide(),c.ajax({type:"get",url:"http://localhost/project/app/php/api/code_login.php",dataType:"json",success:function(o){var e=t("pro-template",{src:o});c("#code_login").html(e)}})})})})});